var projects=[{id:"unwomen",thumb:"th_uw.png",thumbWidth:"200",thumbHeight:"300",title:"UN Women HeforShe.org",description:"Styled reusable SASS modules for a campaign for promoting gender equality in the workforce by United Nation's Women",type:"html/css/js",url:"http://www.heforshe.org",images:[{image_url:"unw.png"},{image_url:"unw2.png"},{image_url:"unw3.png"}]},{id:"wgl",thumb:"wgl1.png",thumbWidth:"200",thumbHeight:"200",title:"WGL Custom Google map app",description:"Custom interface for Washington Gas to filter, display and edit data markers using Google Maps API",type:"html/css/js",url:"",images:[{image_url:"wgl1.png"},{image_url:"wgl2.png"},{image_url:"wgl3.png"}]},{id:"pp",thumb:"pp1.png",thumbWidth:"200",thumbHeight:"200",title:"Planned Parenthood Global mobile site prototype",description:"Developer for client side template based prototype for Planned Parenthood's global division, part of the PP's didactic mission of reaching out to communities in Ecuador and Nigeria",type:"html/css/js",url:"",images:[{image_url:"pp1.png"},{image_url:"pp2.png"},{image_url:"pp3.png"},{image_url:"pp4.png"},{image_url:"pp5.png"}]},{id:"droid",thumb:"droid1.jpg",thumbWidth:"200",thumbHeight:"300",title:"Verizon/Droid Mobile & Tablet Site",description:"Mobile & Tablet site for Verizon/Droid phone, while freelancing for Mcgarrybowen, additional work on Flash fallback interactive animated background",type:"html/css",url:"",images:[{image_url:"droid1.jpg"},{image_url:"droid2.jpg"},{image_url:"droid3.jpg"},{image_url:"droid4.jpg"}]},{id:"believe",thumb:"believe1.jpg",thumbWidth:"200",thumbHeight:"200",title:"Macy's Believe Augmented Reality App",description:"Developed in Flash to promote Macys Believe O magic augmented reality app. Featuring an interactive puppet of the main character plus several updates and bug fixes throughout the site.",type:"html/css",url:"http://social.macys.com/believe/?cm_mmc=VanityUrl-_-believe-_-n-_-n#/believeomagic",images:[{image_url:"believe1.png"},{image_url:"believe2.png"}]},{id:"finder",thumb:"finder3.jpg",thumbWidth:"200",thumbHeight:"200",title:"Macy's Finder Sitelets",description:"The Cookware Finder was probably the most feature rich of the series of Macy's sitelets which also included Bedding and Luggage Finders. Rebuilt from the ground up from Flash sites to cross platform HTML/CSS/jQuery hybrids.",type:"html/css",url:"",images:[{image_url:"finder3.png"},{image_url:"finder4.png"},{image_url:"finder1.png"},{image_url:"finder2.png"},{image_url:"finder5.png"},{image_url:"finder6.png"},{image_url:"finder7.png"},{image_url:"finder8.png"}]},{id:"parade",thumb:"parade1.jpg",thumbWidth:"200",thumbHeight:"200",title:"Macy's Parade Tablet Site",description:"Tablet site for Macy's Parade 2011 event. Note: This site was developed to be displayed in a Ipad/tablet and might not display correctly in every desktop browser.",type:"html/css",url:"http://leonardovelazquez.com/work/parade2011/",images:[{image_url:"parade1.jpg"},{image_url:"parade2.jpg"},{image_url:"parade3.jpg"},{image_url:"parade4.jpg"},{image_url:"parade5.jpg"},{image_url:"parade6.jpg"},{image_url:"parade7.jpg"},{image_url:"parade8.jpg"},{image_url:"parade9.jpg"}]},{id:"fireworks",thumb:"fireworks1.jpg",thumbWidth:"200",thumbHeight:"200",title:"Macy's Fireworks Site",description:"First site in Cross-platform HTML environment for Macy's fireworks event spanning several updates.",type:"html/css",url:"",images:[{image_url:"fireworks1.png"},{image_url:"fireworks2.png"},{image_url:"fireworks3.png"}]},{id:"holiday",thumb:"santa1.jpg",thumbWidth:"200",thumbHeight:"200",title:"Macy's Holiday Gift Guide FB Tablet Site",description:"Macy's Holiday Gift Guide Facebook site done for Tablet in HTML/jQuery using CSS3 animations. NOTE: To view this site in the tablet version link you should view on a tablet device or using a Development Kit for tablet.",type:"html/css",url:"https://apps.facebook.com/187865291301756/",images:[{image_url:"santa1.jpg"},{image_url:"santa2.jpg"},{image_url:"santa3.jpg"},{image_url:"santa4.jpg"}]},{id:"wim",thumb:"wim1.jpg",thumbWidth:"200",thumbHeight:"200",title:"Maya Lin's What is Missing site",description:"",type:"html/css",url:"http://whatismissing.net",images:[{image_url:"wim1.jpg"},{image_url:"wim2.jpg"}]},{id:"newmoon",thumb:"newmoon1.jpg",thumbWidth:"200",thumbHeight:"200",title:'"What\'s driving edward?" Puzzles',description:"",type:"html/css",url:"",images:[{image_url:"newmoon1.jpg"},{image_url:"newmoon2.jpg"},{image_url:"newmoon3.jpg"},{image_url:"newmoon4.jpg"},{image_url:"newmoon5.jpg"}]}];Handlebars.registerHelper("ifZero",function(e,t){return 0==e?t.fn(this):t.inverse(this)});var Project=Backbone.Model.extend({defaults:{id:"def-project",thumb:"demo_project.jpg",thumbWidth:"200",thumbHeight:"200",title:"Guest User",description:"Worker",type:"html/css",images:[{image_url:"sale1.jpg"},{image_url:"sale2.jpg"},{image_url:"sale3.jpg"}]}}),ProjectList=Backbone.Collection.extend({model:Project}),Contact=Backbone.Model.extend({url:"./phpmail.php",defaults:{name:"",email:"",subject:"",message:""},validate:function(e){var t=[];return _.each(e,function(i,a){e[a]||t.push({name:a})}),e.email&&!this.validateEmail(e.email)&&t.push({name:"email"}),t.length>0?t:!1},validateEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}}),ProjectView=Backbone.View.extend({tagName:"div",el:"#project-container",template:$("#project-template"),initialize:function(){var e=this;this.hbtemplate=Handlebars.compile(this.template.html()),this.projectQueue=[],this.transitionTime=1.25,this.transitioning=!1,this.init=!1,this.defaultProject="finder",isMobile.matches||this.showProject(),this.closeBtn=$(".close-project",this.$el),this.closeBtn.click(function(t){e.cleanStage()}),this.resize()},cleanStage:function(){var e=this,t=null,i=$(".project",this.$el).toArray();if(0!=i.length){var a;for(var s in i)a=i[s],$(a).css({position:"absolute"}),t=TweenLite.to(a,.35,{y:1e3,alpha:0,ease:Strong.easeOut,onComplete:function(t){e.projectQueue=_.without(e.projectQueue,t.attributes["data-key"].nodeValue),t.remove()},onCompleteParams:[a]})}},showProject:function(e){if(e||(e=this.defaultProject),e!=this.currentProjectId&&(this.currentProjectId=e,this.cleanStage(),!(this.projectQueue.indexOf(e)>-1))){this.projectQueue.push(e);var t=this,i=t.collection.where({id:e});t.$el.append(t.hbtemplate(i[0].attributes)),$(".carousel",t.$el).carousel(),t.resize();var a=function(){$("item",$("carousel-inner",t.$el)).eq(0).addClass("active"),$(".carousel",t.$el).carousel(),t.resize()},s=$(".project[data-key="+e+"]",this.$el);this.init?tw=TweenLite.from(s,this.transitionTime,{y:-700,alpha:0,ease:Strong.easeOut,onStart:function(e){e.css({position:"relative"})},onStartParams:[s],onComplete:function(){a()}}):(this.init=!0,s.show(),s.css({position:"relative"}),a())}},resize:function(){this.pw=$("#project-container").width(),$(".project",this.$el).width(this.pw)},render:function(){return this.$el.html(this.collection.where({id:0})),this.assign(this.header,".header"),this}}),ThumbView=Backbone.View.extend({el:"div#thumb-container",template:$("#work-template"),events:{"click .thumbs":"thumbClicked"},initialize:function(){var e=this;this.render(),TweenMax.allFrom($(".thumbs",e.$el),1,{alpha:0},.1)},thumbClicked:function(e){$(".thumbs",this.$el).removeClass("current-project"),$(e.currentTarget).addClass("current-project")},render:function(){var e=Handlebars.compile(this.template.html()),t=null;return this.collection.each(function(i,a){t=e(i.attributes),$(".thumbs-col",this.$el).eq(a%3).append(t)},this),this},showProjectSml:function(e){this.collection.where({id:e})}}),ContactView=Backbone.View.extend({el:"div#contact-container",template:$("#contact-template"),events:{"click #submit":"submitClicked"},initialize:function(){var e=this;this.model.on("invalid",function(t){e.resetSubmit(),e.showErrors(t.validationError)}),this.render(),this.submitBtn=e.$("#submit"),this.statusMsg=e.$("#statusMsg")},resetSubmit:function(){this.submitBtn.removeClass("disabled"),this.submitBtn.html("SUBMIT")},submitClicked:function(e){e.preventDefault();var t=this,i={email:this.$("#contact_email").val(),name:this.$("#contact_name").val(),subject:this.$("#contact_subject").val(),message:this.$("#contact_message").val()},a={success:function(){t.statusMsg.html(errors.responseText),t.statusMsg.show(),_.delay(function(){t.statusMsg.hide()},1e3)},error:function(e,i){switch(console.log(i),i.statusText){case"OK":t.statusMsg.html(i.responseText),t.statusMsg.show(),_.delay(function(){t.statusMsg.hide()},1e3)}t.resetSubmit()}};this.hideErrors(),this.submitBtn.html("Sending..."),this.submitBtn.addClass("disabled"),this.model.save(i,a)},render:function(){var e=Handlebars.compile(this.template.html());return this.$el.html(e),this},showErrors:function(e){_.each(e,function(e){var t=this.$(".contact-"+e.name);t.removeClass("has-success"),t.addClass("has-error")},this)},hideErrors:function(){this.$(".contact-info").addClass("has-success"),this.$(".contact-info").removeClass("has-error")}}),myProjects=new ProjectList(projects),isMobile=window.matchMedia("only screen and (max-width: 760px)"),MainRouter=Backbone.Router.extend({routes:{"work/:id":"showProject",work:"jumpToPage",about:"jumpToPage",contact:"jumpToPage"},hideProject:function(){isMobile.matches&&this.project.$el.addClass("invisible")},initialize:function(){var e=this;this.thumbs=new ThumbView({collection:myProjects}),this.project=new ProjectView({collection:myProjects}),$(window).resize(function(){e.project.resize()}),$("body").on("activate.bs.scrollspy",function(t){var i=$("a",t.target).attr("href");e._scrolling=!0,"#/"!=i?(_.isUndefined(e.project)||_.isUndefined(e.project.currentProjectId)||"#/work"!=i||(i=i+"/"+e.project.currentProjectId),e.navigate(i,{replace:!0})):e.navigate("#/",{replace:!0})}),$(".nav-item").bind("click",function(t){t.preventDefault();var i=$(this).data("target");e._scrolling=!1,e.navigate(i,{replace:!0})})},jumpToPage:function(e){var t=this;if(e!=this.project.currentProjectId&&(t.hideProject(),!t._scrolling)){var i=$("#"+e).offset().top;TweenLite.to($("html, body"),1,{scrollTop:i,ease:Expo.easeInOut})}},showProject:function(e){this.jumpToPage("work"),isMobile.matches&&this.project.$el.removeClass("invisible"),this.project.showProject(e)}});$(document).ready(function(){var e=(new MainRouter,new Contact),t=(new ContactView({model:e}),$("#siteBg")),i=$("#myPlayer",t);$("img.lazy").lazyload({effect:"fadeIn"});var a=function(){$("polygon",".site-logo").css({fill:"white"}),$("span",".brand-heading").css({color:"white"}),TweenLite.to($(".background-poster",t),5,{alpha:1,ease:Strong.easeOut})};isMobile.matches||bowser.msie&&bowser.version<=8?(i.remove(),$(".background-poster",t).show()):(i.on("canplay",a),i[0].readyState>3&&a());var s=$(".navbar"),r=$(".logo-header");$(window).scroll(function(){s.offset().top>50?(TweenLite.to(s,1.5,{top:"0px",ease:Circ.easeOut,onStart:function(){s.css("display","block"),s.css("top","-50px")}}),isMobile.matches||bowser.msie&&bowser.version<=8||(TweenLite.to(r,3,{alpha:0,ease:Circ.easeOut}),s.offset().top>200&&$("#myPlayer")[0].pause())):(TweenLite.to(s,.25,{top:"-50px",ease:Circ.easeOut}),isMobile.matches||bowser.msie&&bowser.version<=8||(TweenLite.to(r,1,{alpha:1,ease:Circ.easeOut}),$("#myPlayer")[0].play()))}),Backbone.history.start()});var myOptions={zoom:12,center:new google.maps.LatLng(47.6229,-122.3165),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#A5C7DE"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{gamma:.01},{lightness:20}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{saturation:-31},{lightness:-33},{weight:2},{gamma:.8}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#A5C7DE"}]},{featureType:"administrative.province",elementType:"geometry.fill",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:30},{saturation:30}]},{featureType:"poi",elementType:"geometry",stylers:[{saturation:20}]},{featureType:"poi.park",elementType:"geometry",stylers:[{lightness:20},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:10},{saturation:-30}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{saturation:25},{lightness:25}]},{featureType:"water",elementType:"all",stylers:[{lightness:-20}]}]},map=new google.maps.Map(document.getElementById("map"),myOptions);